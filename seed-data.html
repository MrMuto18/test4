<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© - ÙÙ„Ø§Ø­ÙŠÙ†</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(135deg, #f5f1e8 0%, #e8dcc8 100%);
            min-height: 100vh;
            padding: 30px;
            text-align: center;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 5px 30px rgba(0,0,0,0.1);
        }

        h1 {
            color: #2d8659;
            font-size: 2em;
            margin-bottom: 20px;
        }

        .btn {
            padding: 15px 40px;
            background: linear-gradient(135deg, #2d8659 0%, #1e6b45 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-family: 'Tajawal', sans-serif;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(45, 134, 89, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        #log {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: right;
            max-height: 400px;
            overflow-y: auto;
        }

        .log-line {
            padding: 5px;
            margin: 5px 0;
            border-radius: 5px;
        }

        .log-success {
            background: #d4edda;
            color: #155724;
        }

        .log-error {
            background: #f8d7da;
            color: #721c24;
        }

        .log-info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ¾ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©</h1>
        <p>Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ØªØ²ÙŠØ¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¦Ù„Ø© ÙÙŠ Firestore</p>
        
        <button class="btn" id="loadProductsBtn" onclick="loadProducts()" disabled>
            ğŸ“¦ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (9)
        </button>
        
        <button class="btn" id="loadQuestionsBtn" onclick="loadQuestions()" disabled>
            â“ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (8)
        </button>
        
        <button class="btn" id="loadAllBtn" onclick="loadAll()" style="background: linear-gradient(135deg, #f39c12 0%, #d67d1f 100%);" disabled>
            ğŸš€ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙ„
        </button>

        <div id="log"></div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC-z9igQOo7PbKiTzhi2fIRrHHuUXhN6AU",
            authDomain: "fla7in.firebaseapp.com",
            projectId: "fla7in",
            storageBucket: "fla7in.firebasestorage.app",
            messagingSenderId: "463607450723",
            appId: "1:463607450723:web:04d95f04873d15634bfc56"
        };

        let app, auth, db;

        window.addEventListener('load', function() {
            if (typeof firebase === 'undefined') {
                log('âŒ Firebase ØºÙŠØ± Ù…ØªØ§Ø­!', 'error');
                return;
            }

            try {
                app = firebase.initializeApp(firebaseConfig);
                auth = firebase.auth();
                db = firebase.firestore();
                log('âœ… Firebase Ø¬Ø§Ù‡Ø²!', 'success');
                
                // Check authentication
                auth.onAuthStateChanged(function(user) {
                    if (user) {
                        log('âœ… Ù…Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„: ' + user.email, 'success');
                        log('ğŸ“ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'info');
                        document.getElementById('loadProductsBtn').disabled = false;
                        document.getElementById('loadQuestionsBtn').disabled = false;
                        document.getElementById('loadAllBtn').disabled = false;
                    } else {
                        log('âš ï¸ ØºÙŠØ± Ù…Ø³Ø¬Ù‘Ù„! Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹', 'error');
                        showLoginForm();
                    }
                });
            } catch (error) {
                log('âŒ Ø®Ø·Ø£: ' + error.message, 'error');
            }
        });
        
        function showLoginForm() {
            const container = document.querySelector('.container');
            const loginHtml = '<div style="margin: 30px 0; padding: 30px; background: #fff3cd; border-radius: 15px; border: 2px solid #f39c12;">' +
                '<h3 style="color: #856404; margin-bottom: 20px;">ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø·Ù„ÙˆØ¨</h3>' +
                '<input type="email" id="loginEmail" placeholder="admin@falla7in.com" style="width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid #dee2e6; border-radius: 10px; font-family: Tajawal; font-size: 1em;">' +
                '<input type="password" id="loginPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±" style="width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid #dee2e6; border-radius: 10px; font-family: Tajawal; font-size: 1em;">' +
                '<button onclick="loginUser()" class="btn" style="background: linear-gradient(135deg, #f39c12 0%, #d67d1f 100%);">ğŸ”‘ Ø¯Ø®ÙˆÙ„</button>' +
                '</div>';
            container.insertAdjacentHTML('afterbegin', loginHtml);
        }
        
        function loginUser() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            log('ğŸ” Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...', 'info');
            
            auth.signInWithEmailAndPassword(email, password)
                .then(function() {
                    log('âœ… ØªÙ…Ù‘ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    location.reload();
                })
                .catch(function(error) {
                    log('âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„: ' + error.message, 'error');
                });
        }

        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const line = document.createElement('div');
            line.className = 'log-line log-' + type;
            line.textContent = message;
            logDiv.appendChild(line);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        // Products Data
        const products = [
            {
                name: "Ø³Ù…Ø§Ø¯ Ø¹Ø¶ÙˆÙŠ Ù…ØªÙƒØ§Ù…Ù„",
                price: 45.50,
                description: "Ø³Ù…Ø§Ø¯ Ø¹Ø¶ÙˆÙŠ Ø·Ø¨ÙŠØ¹ÙŠ 100% ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù†Ù…Ùˆ ØµØ­ÙŠ ÙˆÙ…ØªÙˆØ§Ø²Ù†",
                category: "fertilizers",
                icon: "ğŸŒ±"
            },
            {
                name: "Ø³Ù…Ø§Ø¯ Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ†ÙŠ",
                price: 28.00,
                description: "Ø³Ù…Ø§Ø¯ ØºÙ†ÙŠ Ø¨Ø§Ù„Ù†ÙŠØªØ±ÙˆØ¬ÙŠÙ† Ù„ØªØ¹Ø²ÙŠØ² Ù†Ù…Ùˆ Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ ÙˆØ§Ù„Ø³Ø§Ù‚",
                category: "fertilizers",
                icon: "ğŸŒ¿"
            },
            {
                name: "Ù…Ø¨ÙŠØ¯ Ø­Ø´Ø±ÙŠ Ø·Ø¨ÙŠØ¹ÙŠ",
                price: 35.00,
                description: "Ù…Ø¨ÙŠØ¯ Ø­Ø´Ø±ÙŠ Ø·Ø¨ÙŠØ¹ÙŠ Ø¢Ù…Ù† Ù„Ù„Ø¨ÙŠØ¦Ø© ÙˆÙØ¹Ø§Ù„ Ø¶Ø¯ Ø§Ù„Ø¢ÙØ§Øª",
                category: "pesticides",
                icon: "ğŸ›¡ï¸"
            },
            {
                name: "Ù…Ø¨ÙŠØ¯ ÙØ·Ø±ÙŠ",
                price: 42.00,
                description: "Ù…Ø¨ÙŠØ¯ ÙØ·Ø±ÙŠ Ù„Ù„ÙˆÙ‚Ø§ÙŠØ© ÙˆØ§Ù„Ø¹Ù„Ø§Ø¬ Ù…Ù† Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„ÙØ·Ø±ÙŠØ©",
                category: "pesticides",
                icon: "ğŸ’Š"
            },
            {
                name: "Ø¨Ø°ÙˆØ± Ø·Ù…Ø§Ø·Ù… Ù‡Ø¬ÙŠÙ†Ø©",
                price: 12.00,
                description: "Ø¨Ø°ÙˆØ± Ø·Ù…Ø§Ø·Ù… Ù‡Ø¬ÙŠÙ†Ø© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© ÙˆÙ…Ù‚Ø§ÙˆÙ…Ø© Ù„Ù„Ø£Ù…Ø±Ø§Ø¶",
                category: "seeds",
                icon: "ğŸ…"
            },
            {
                name: "Ø¨Ø°ÙˆØ± Ù‚Ù…Ø­ Ù…Ø­Ø³Ù‘Ù†Ø©",
                price: 18.00,
                description: "Ø¨Ø°ÙˆØ± Ù‚Ù…Ø­ Ù…Ø­Ø³Ù‘Ù†Ø© ÙˆØ±Ø§Ø«ÙŠØ§Ù‹ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©",
                category: "seeds",
                icon: "ğŸŒ¾"
            },
            {
                name: "Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø±ÙŠ Ø§Ù„Ø°ÙƒÙŠØ©",
                price: 120.00,
                description: "Ù†Ø¸Ø§Ù… Ø±ÙŠ Ø°ÙƒÙŠ ÙŠÙˆÙØ± Ø§Ù„Ù…ÙŠØ§Ù‡ ÙˆÙŠØ­Ø³Ù† Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©",
                category: "tools",
                icon: "ğŸ’§"
            },
            {
                name: "Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ©",
                price: 65.00,
                description: "Ø·Ù‚Ù… ÙƒØ§Ù…Ù„ Ù…Ù† Ù…Ø¹Ø¯Ø§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø´Ø®ØµÙŠØ© Ù„Ù„Ù…Ø²Ø§Ø±Ø¹ÙŠÙ†",
                category: "tools",
                icon: "ğŸ¦º"
            },
            {
                name: "Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ³Ù…ÙŠØ¯ Ø§Ù„Ø¢Ù„ÙŠ",
                price: 250.00,
                description: "Ù†Ø¸Ø§Ù… ØªØ³Ù…ÙŠØ¯ Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒÙŠ Ù„ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø³Ù…Ø§Ø¯ Ø¨Ø¯Ù‚Ø©",
                category: "tools",
                icon: "ğŸ”§"
            }
        ];

        // Questions Data
        const questions = [
            {
                order: 1,
                question: "Ø´Ù†ÙŠÙ‘Ø© Ø§Ù„ÙÙ„Ø§Ø­Ø© Ù…ØªØ§Ø¹ÙƒØŸ",
                type: "select",
                required: true,
                active: true,
                options: [
                    { value: "tomatoes", label: "Ø·Ù…Ø§Ø·Ù…", icon: "ğŸ…" },
                    { value: "carrots", label: "Ø³ÙÙ†Ø§Ø±ÙŠØ©", icon: "ğŸ¥•" },
                    { value: "pepper", label: "ÙÙ„ÙÙ„", icon: "ğŸŒ¶ï¸" },
                    { value: "eggplant", label: "Ø¨Ø°Ù†Ø¬Ø§Ù†", icon: "ğŸ†" },
                    { value: "zucchini", label: "ÙƒÙˆØ³Ø©", icon: "ğŸ¥’" },
                    { value: "watermelon", label: "Ø¨Ø·ÙŠØ®", icon: "ğŸ‰" },
                    { value: "potato", label: "Ø¨Ø·Ø§Ø·Ø§", icon: "ğŸ¥”" },
                    { value: "olives", label: "Ø²ÙŠØªÙˆÙ†", icon: "ğŸ«’" },
                    { value: "wheat", label: "Ù‚Ù…Ø­", icon: "ğŸŒ¾" },
                    { value: "parsley", label: "Ø¨Ø³Ø¨Ø§Ø³", icon: "ğŸŒ¿" }
                ]
            },
            {
                order: 2,
                question: "Ø´Ù†ÙˆÙ‘Ø© Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø¥Ù„Ù„ÙŠ Ø¹Ù†Ø¯ÙƒØŸ",
                type: "select",
                required: true,
                active: true,
                options: [
                    { value: "yellowing", label: "Ø§ØµÙØ±Ø§Ø± Ø§Ù„Ø£ÙˆØ±Ø§Ù‚", icon: "ğŸ‚" },
                    { value: "falling", label: "ØªØ³Ø§Ù‚Ø· Ø§Ù„Ø«Ù…Ø§Ø±", icon: "ğŸƒ" },
                    { value: "insects", label: "Ø­Ø´Ø±Ø§Øª Ø¶Ø§Ø±Ø©", icon: "ğŸ›" },
                    { value: "weak", label: "Ù†Ù…Ùˆ Ø¶Ø¹ÙŠÙ", icon: "ğŸŒ±" }
                ]
            },
            {
                order: 3,
                question: "ÙˆÙ‚ØªØ§Ø´ Ù„Ø§Ø­Ø¸Øª Ø§Ù„Ù…Ø´ÙƒÙ„Ø©ØŸ",
                type: "select",
                required: true,
                active: true,
                options: [
                    { value: "week", label: "Ù…Ù†Ø° Ø£Ø³Ø¨ÙˆØ¹", icon: "ğŸ“…" },
                    { value: "month", label: "Ù…Ù†Ø° Ø´Ù‡Ø±", icon: "ğŸ“†" },
                    { value: "more", label: "Ù…Ù†Ø° Ø£ÙƒØ«Ø± Ù…Ù† Ø´Ù‡Ø±", icon: "ğŸ—“ï¸" }
                ]
            },
            {
                order: 4,
                question: "Ù‚Ø¯Ù‘Ø§Ø´ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù…ØªØ§Ø¹ Ø§Ù„Ø²Ø±Ø¹ØŸ",
                type: "text",
                required: true,
                active: true
            },
            {
                order: 5,
                question: "Ø§Ø³ØªØ¹Ù…Ù„Øª Ø´ÙŠ Ø¹Ù„Ø§Ø¬ Ù‚Ø¨Ù„ØŸ",
                type: "select",
                required: true,
                active: true,
                options: [
                    { value: "yes", label: "Ù†Ø¹Ù…", icon: "âœ…" },
                    { value: "no", label: "Ù„Ø§", icon: "âŒ" }
                ]
            },
            {
                order: 6,
                question: "Ø´Ù†ÙˆÙ‘Ø© Ù†ÙˆØ¹ Ø§Ù„ØªØ±Ø¨Ø©ØŸ",
                type: "select",
                required: true,
                active: true,
                options: [
                    { value: "clay", label: "Ø·ÙŠÙ†ÙŠØ©", icon: "ğŸŸ¤" },
                    { value: "sandy", label: "Ø±Ù…Ù„ÙŠØ©", icon: "ğŸŸ¡" },
                    { value: "limestone", label: "ÙƒÙ„Ø³ÙŠØ©", icon: "âšª" },
                    { value: "mixed", label: "Ù…Ø®ØªÙ„Ø·Ø©", icon: "ğŸŸ¢" }
                ]
            },
            {
                order: 7,
                question: "Ù‚Ø¯Ù‘Ø§Ø´ Ù…Ø±Ù‘Ø© ØªØ³Ù‚ÙŠØŸ",
                type: "select",
                required: true,
                active: true,
                options: [
                    { value: "daily", label: "ÙƒÙ„ ÙŠÙˆÙ…", icon: "ğŸ’§" },
                    { value: "every2days", label: "ÙƒÙ„ ÙŠÙˆÙ…ÙŠÙ†", icon: "ğŸ’¦" },
                    { value: "weekly", label: "Ù…Ø±Ù‘Ø© ÙÙŠ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹", icon: "ğŸš¿" }
                ]
            },
            {
                order: 8,
                question: "ØªØ³ØªØ¹Ù…Ù„ Ø³Ù…Ø§Ø¯ ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠØŸ",
                type: "select",
                required: true,
                active: true,
                options: [
                    { value: "yes", label: "Ù†Ø¹Ù…", icon: "âœ…" },
                    { value: "no", label: "Ù„Ø§", icon: "âŒ" },
                    { value: "sometimes", label: "Ø£Ø­ÙŠØ§Ù†Ø§Ù‹", icon: "ğŸ”„" }
                ]
            }
        ];

        // Load Products
        async function loadProducts() {
            const btn = document.getElementById('loadProductsBtn');
            btn.disabled = true;
            log('ğŸ“¦ Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª...', 'info');

            try {
                for (let i = 0; i < products.length; i++) {
                    const product = products[i];
                    product.createdAt = firebase.firestore.FieldValue.serverTimestamp();
                    product.updatedAt = firebase.firestore.FieldValue.serverTimestamp();
                    
                    await db.collection('products').add(product);
                    log(`âœ… ØªÙ…Ù‘ Ø¥Ø¶Ø§ÙØ©: ${product.name}`, 'success');
                }
                
                log('ğŸ‰ ØªÙ…Ù‘ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª!', 'success');
            } catch (error) {
                log('âŒ Ø®Ø·Ø£: ' + error.message, 'error');
            } finally {
                btn.disabled = false;
            }
        }

        // Load Questions
        async function loadQuestions() {
            const btn = document.getElementById('loadQuestionsBtn');
            btn.disabled = true;
            log('â“ Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©...', 'info');

            try {
                for (let i = 0; i < questions.length; i++) {
                    const question = questions[i];
                    question.createdAt = firebase.firestore.FieldValue.serverTimestamp();
                    question.updatedAt = firebase.firestore.FieldValue.serverTimestamp();
                    
                    await db.collection('questions').add(question);
                    log(`âœ… ØªÙ…Ù‘ Ø¥Ø¶Ø§ÙØ©: Ø§Ù„Ø³Ø¤Ø§Ù„ ${question.order}`, 'success');
                }
                
                log('ğŸ‰ ØªÙ…Ù‘ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©!', 'success');
            } catch (error) {
                log('âŒ Ø®Ø·Ø£: ' + error.message, 'error');
            } finally {
                btn.disabled = false;
            }
        }

        // Load All
        async function loadAll() {
            const btn = document.getElementById('loadAllBtn');
            btn.disabled = true;
            
            await loadProducts();
            await loadQuestions();
            
            log('ğŸš€ ØªÙ…Ù‘ ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ø´ÙŠ!', 'success');
            btn.disabled = false;
        }
    </script>
</body>
</html>
