<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ­Ù…ÙŠÙ„ Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚ÙŠØ© - Firebase</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2d8659 0%, #1e6b45 100%);
            min-height: 100vh;
            padding: 20px;
            direction: rtl;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 { color: #2d8659; text-align: center; margin-bottom: 30px; }
        .status {
            background: #f5f1e8;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            max-height: 400px;
            overflow-y: auto;
        }
        .status div { padding: 8px; margin-bottom: 5px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; border-right: 4px solid #28a745; }
        .error { background: #f8d7da; color: #721c24; border-right: 4px solid #dc3545; }
        .info { background: #d1ecf1; color: #0c5460; border-right: 4px solid #17a2b8; }
        button {
            width: 100%;
            padding: 15px;
            background: #2d8659;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 10px;
        }
        button:hover { background: #1e6b45; }
        button:disabled { background: #ccc; cursor: not-allowed; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ± ØªØ­Ù…ÙŠÙ„ Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„ Ø§Ù„Ø¨Ø§Ù‚ÙŠØ©</h1>
        
        <div class="status" id="status">
            <div class="info">â³ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡...</div>
        </div>

        <button onclick="uploadAllCrops()" id="uploadBtn">
            ğŸš€ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙ„ (ÙÙ„ÙÙ„ØŒ Ø¨Ø·Ø§Ø·Ø§ØŒ Ø¨Ø·ÙŠØ®ØŒ Ø¯Ù„Ø§Ø¹ØŒ ÙØ±Ø§ÙˆÙ„Ø©)
        </button>
    </div>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, query, where, getDocs, deleteDoc, addDoc, serverTimestamp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyC-z9igQOo7PbKiTzhi2fIRrHHuUXhN6AU",
            authDomain: "fla7in.firebaseapp.com",
            projectId: "fla7in",
            storageBucket: "fla7in.firebasestorage.app",
            messagingSenderId: "463607450723",
            appId: "1:463607450723:web:04d95f04873d15634bfc56",
            measurementId: "G-WXN72JJ5DP"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        function addStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            const div = document.createElement('div');
            div.className = type;
            div.textContent = message;
            statusDiv.appendChild(div);
            statusDiv.scrollTop = statusDiv.scrollHeight;
        }

        // Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ù…Ù† Ø§Ù„Ø·Ù…Ø§Ø·Ù…)
        const baseSolutions = [
            {
                period: 'short',
                periodName: 'Ù…Ù† 15 Ø¥Ù„Ù‰ 45 ÙŠÙˆÙ… Ø¨Ø¹Ø¯ Ø§Ù„ØºØ±Ø§Ø³Ø©',
                problem: 'Ø¯ÙØ¹Ø© Ù‚ÙˆÙŠØ© Ù„Ù„Ù†Ù…Ùˆ Ø§Ù„Ø®Ø¶Ø±ÙŠ',
                products: [
                    {
                        name: 'Ø³Ù…Ø§Ø¯ ÙˆØ±Ù‚ÙŠ NPK Ù…ØªÙˆØ§Ø²Ù† (20-20-20)',
                        dosage: '2 ÙƒØº / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠØ¹Ø·ÙŠ Ø¯ÙØ¹Ø© Ù‚ÙˆÙŠØ© Ù„Ù„Ù†Ù…Ùˆ Ø§Ù„Ø®Ø¶Ø±ÙŠ ÙˆÙŠÙ‚ÙˆÙ‘ÙŠ Ø§Ù„Ù†Ø¨Ø§Øª ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©',
                        icon: 'ğŸŒ¿'
                    },
                    {
                        name: 'Ø£Ø­Ù…Ø§Ø¶ Ø£Ù…ÙŠÙ†ÙŠØ© + Ø·Ø­Ø§Ù„Ø¨ Ø¨Ø­Ø±ÙŠØ©',
                        dosage: '0.5 â€“ 1 Ù„ØªØ± / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠØ­Ø³Ù‘Ù† Ø§Ù„Ø§Ù…ØªØµØ§Øµ ÙˆÙŠØ®ÙÙ‘Ù Ø§Ù„Ø³ØªØ±Ø³ Ø¨Ø¹Ø¯ Ø§Ù„Ø±Ø´Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰',
                        icon: 'ğŸŒŠ'
                    },
                    {
                        name: 'ÙƒØ§Ù„Ø³ÙŠÙˆÙ… + Ø¨ÙˆØ±ÙˆÙ† (Ø±Ø´ ÙˆØ±Ù‚ÙŠ)',
                        dosage: '1 Ù„ØªØ± / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠÙ‚ÙˆÙ‘ÙŠ Ø§Ù„Ø£Ù†Ø³Ø¬Ø© ÙˆØ§Ù„Ù‚Ù…Ù… Ø§Ù„Ù†Ø§Ù…ÙŠØ© ÙˆÙŠØ­Ø¶Ù‘Ø± Ø§Ù„Ù†Ø¨Ø§Øª Ù„Ù„Ø¥Ø²Ù‡Ø§Ø± Ø§Ù„Ø¬Ø§ÙŠ',
                        icon: 'ğŸ¦´'
                    },
                    {
                        name: 'Ù…Ø¨ÙŠØ¯ ÙØ·Ø±ÙŠ ÙˆÙ‚Ø§Ø¦ÙŠ (Ù…Ø§Ù†ÙƒÙˆØ²ÙŠØ¨ Ø£Ùˆ Azoxystrobin)',
                        dosage: 'Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§',
                        purpose: 'ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù„ÙØ­Ø© ÙˆØ§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„ÙˆØ±Ù‚ÙŠØ© ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ù†Ù…Ùˆ Ø³Ø±ÙŠØ¹',
                        icon: 'ğŸ›¡ï¸'
                    },
                    {
                        name: 'Ù…Ø¨ÙŠØ¯ Ø­Ø´Ø±ÙŠ (Imidacloprid Ø£Ùˆ Acetamiprid)',
                        dosage: 'Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØªÙØ¬',
                        purpose: 'Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„Ù…Ù†Ù‘ØŒ Ø§Ù„Ø°Ø¨Ø§Ø¨Ø© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ØŒ ÙˆØ§Ù„ØªØ±Ø¨Ø³ Ø§Ù„Ù„ÙŠ ÙŠØ¶Ø¹Ù‘ÙÙˆ Ø§Ù„Ù†Ø¨Ø§Øª Ø¨Ø¯Ø±ÙŠ',
                        icon: 'ğŸ›'
                    }
                ]
            },
            {
                period: 'medium',
                periodName: 'Ù…Ù† 45 Ø¥Ù„Ù‰ 60 ÙŠÙˆÙ… (Ù†Ù‡Ø§ÙŠØ© Ù†Ù…Ùˆ Ø®Ø¶Ø±ÙŠ + Ø¨Ø¯Ø§ÙŠØ© Ø¥Ø²Ù‡Ø§Ø± ÙˆØ¹Ù‚Ø¯)',
                problem: 'Ø¯ÙØ¹ Ø§Ù„Ø¥Ø²Ù‡Ø§Ø± ÙˆØªÙ‚ÙˆÙŠØ© Ø§Ù„Ø¹Ù‚Ø¯',
                products: [
                    {
                        name: 'Ø³Ù…Ø§Ø¯ ÙˆØ±Ù‚ÙŠ Ø¹Ø§Ù„ÙŠ Ø§Ù„ÙÙˆØ³ÙÙˆØ± (13-40-13)',
                        dosage: '2 ÙƒØº / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠØ¯ÙØ¹ Ø§Ù„Ù†Ø¨Ø§Øª Ù„Ù„Ø¥Ø²Ù‡Ø§Ø± ÙˆÙŠÙ‚ÙˆÙ‘ÙŠ Ø§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ø£ÙˆÙ„',
                        icon: 'ğŸŒ¸'
                    },
                    {
                        name: 'Ø·Ø­Ø§Ù„Ø¨ Ø¨Ø­Ø±ÙŠØ© + Ø£Ø­Ù…Ø§Ø¶ Ø£Ù…ÙŠÙ†ÙŠØ©',
                        dosage: '1 Ù„ØªØ± / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠØ­Ø³Ù‘Ù† Ø§Ù„Ø¹Ù‚Ø¯ ÙˆÙŠÙ‚Ù„Ù‘Ù„ ØªØ³Ø§Ù‚Ø· Ø§Ù„Ø²Ù‡Ø±Ø©',
                        icon: 'ğŸŒŠ'
                    },
                    {
                        name: 'Ø¨ÙˆØ±ÙˆÙ† + Ø²Ù†Ùƒ (Foliar B + Zn)',
                        dosage: '0.5 â€“ 1 Ù„ØªØ± / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'Ø¹Ù†Ø§ØµØ± Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„Ø¥Ø²Ù‡Ø§Ø± ÙˆØ§Ù„Ø¹Ù‚Ø¯ Ø§Ù„Ù…Ù†ØªØ¸Ù…',
                        icon: 'âš¡'
                    },
                    {
                        name: 'Ù…Ø¨ÙŠØ¯ ÙØ·Ø±ÙŠ (Azoxystrobin Ø£Ùˆ Difenoconazole)',
                        dosage: 'Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø© Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§',
                        purpose: 'Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø£Ø²Ù‡Ø§Ø± Ù…Ù† Ø§Ù„Ù„ÙØ­Ø© ÙˆØ§Ù„Ø¨ÙŠØ§Ø¶ ÙÙŠ ÙØªØ±Ø© Ø­Ø³Ø§Ø³Ø©',
                        icon: 'ğŸ›¡ï¸'
                    },
                    {
                        name: 'Ù…Ø¨ÙŠØ¯ Ø­Ø´Ø±ÙŠ (Acetamiprid Ø£Ùˆ Spinosad)',
                        dosage: 'Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØªÙØ¬',
                        purpose: 'Ù…ÙƒØ§ÙØ­Ø© Ø§Ù„ØªØ±Ø¨Ø³ ÙˆØ§Ù„Ø°Ø¨Ø§Ø¨Ø© Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ Ø§Ù„Ù„ÙŠ ØªØ£Ø«Ù‘Ø± Ù…Ø¨Ø§Ø´Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù‚Ø¯',
                        icon: 'ğŸ›'
                    }
                ]
            },
            {
                period: 'long',
                periodName: 'Ù…Ù† 60 Ø¥Ù„Ù‰ 90 ÙŠÙˆÙ… (ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø«Ù…Ø§Ø± + Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ¶Ø®ÙŠÙ…)',
                problem: 'ØªØ¶Ø®ÙŠÙ… Ø§Ù„Ø«Ù…Ø§Ø± ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©',
                products: [
                    {
                        name: 'Ø³ÙŠØªØ±Ø§Øª Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ… (Foliar Potassium Citrate)',
                        dosage: '2 â€“ 3 ÙƒØº / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠØ¶Ø®Ù‘Ù… Ø§Ù„Ø«Ù…Ø§Ø±ØŒ ÙŠØ­Ø³Ù‘Ù† Ø§Ù„Ù„ÙˆÙ† ÙˆØ§Ù„Ø·Ø¹Ù…ØŒ ÙˆÙŠØ³Ø§Ø¹Ø¯ Ø¹Ù„Ù‰ Ù†Ù‚Ù„ Ø§Ù„Ø³ÙƒØ±ÙŠØ§Øª',
                        icon: 'ğŸ…'
                    },
                    {
                        name: 'Ø·Ø­Ø§Ù„Ø¨ Ø¨Ø­Ø±ÙŠØ© + Ø£Ø­Ù…Ø§Ø¶ Ø£Ù…ÙŠÙ†ÙŠØ©',
                        dosage: '1 Ù„ØªØ± / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠÙ‚Ù„Ù‘Ù„ Ø§Ù„Ø³ØªØ±Ø³ ÙˆÙ‚Øª Ø§Ù„Ø­Ù…Ù„ ÙˆÙŠØ«Ø¨Ù‘Øª Ø§Ù„Ø¹Ù‚Ø¯',
                        icon: 'ğŸŒŠ'
                    },
                    {
                        name: 'ÙƒØ§Ù„Ø³ÙŠÙˆÙ… ÙˆØ±Ù‚ÙŠ (Calcium nitrate Ø£Ùˆ Ca chelate)',
                        dosage: '1 â€“ 1.5 Ù„ØªØ± / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠÙ…Ù†Ø¹ ØªØ¹ÙÙ‘Ù† Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø²Ù‡Ø±ÙŠ ÙˆÙŠÙ‚ÙˆÙ‘ÙŠ Ø¬Ø¯Ø§Ø± Ø§Ù„Ø«Ù…Ø±Ø©',
                        icon: 'ğŸ¦´'
                    },
                    {
                        name: 'Ù…Ø¨ÙŠØ¯ ÙØ·Ø±ÙŠ (Azoxystrobin + Mancozeb Ø£Ùˆ Ø¨Ø¯ÙŠÙ„ Ø¨Ø§Ù„ØªÙ†Ø§ÙˆØ¨)',
                        dosage: 'Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø©',
                        purpose: 'Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ ÙˆØ§Ù„Ø«Ù…Ø§Ø± Ù…Ù† Ø§Ù„Ù„ÙØ­Ø© ÙÙŠ Ù…Ø±Ø­Ù„Ø© Ø­Ø³Ø§Ø³Ø©',
                        icon: 'ğŸ›¡ï¸'
                    },
                    {
                        name: 'Ù…Ø¨ÙŠØ¯ Ø­Ø´Ø±ÙŠ (Spinosad Ø£Ùˆ Abamectin)',
                        dosage: 'Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØªÙØ¬',
                        purpose: 'Ù…ÙƒØ§ÙØ­Ø© Ø­ÙÙ‘Ø§Ø± Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ØŒ Ø§Ù„ØªØ±Ø¨Ø³ØŒ ÙˆØ§Ù„Ø¹Ù†Ø§ÙƒØ¨',
                        icon: 'ğŸ›'
                    }
                ]
            },
            {
                period: 'harvest',
                periodName: 'Ù…Ù† 90 ÙŠÙˆÙ… Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ù†ÙŠ (Ù†Ø¶Ø¬ Ø§Ù„Ø«Ù…Ø§Ø± + ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©)',
                problem: 'ØªØ³Ø±ÙŠØ¹ Ø§Ù„ØªÙ„ÙˆÙŠÙ† ÙˆØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©',
                products: [
                    {
                        name: 'Ø³ÙŠØªØ±Ø§Øª Ø§Ù„Ø¨ÙˆØªØ§Ø³ÙŠÙˆÙ… (Foliar)',
                        dosage: '2 ÙƒØº / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠØ³Ø±Ù‘Ø¹ Ø§Ù„ØªÙ„ÙˆÙŠÙ†ØŒ ÙŠØ±ÙØ¹ Ø§Ù„Ø³ÙƒØ±ØŒ ÙˆÙŠØ­Ø³Ù‘Ù† Ø§Ù„ØµÙ„Ø§Ø¨Ø© ÙˆØ§Ù„Ø·Ø¹Ù…',
                        icon: 'ğŸ…'
                    },
                    {
                        name: 'ÙƒØ§Ù„Ø³ÙŠÙˆÙ… ÙˆØ±Ù‚ÙŠ (Chelated Ca Ø£Ùˆ Ca nitrate)',
                        dosage: '1 Ù„ØªØ± / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ ØµÙ„Ø§Ø¨Ø© Ø§Ù„Ø«Ù…Ø±Ø© ÙˆÙŠØ·ÙˆÙ‘Ù„ Ø¹Ù…Ø±Ù‡Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ø¬Ù†ÙŠ',
                        icon: 'ğŸ¦´'
                    },
                    {
                        name: 'Ø£Ø­Ù…Ø§Ø¶ Ø£Ù…ÙŠÙ†ÙŠØ© Ø®ÙÙŠÙØ©',
                        dosage: '0.5 Ù„ØªØ± / Ù‡ÙƒØªØ§Ø±',
                        purpose: 'ÙŠØ®ÙÙ‘Ù Ø§Ù„Ø¥Ø¬Ù‡Ø§Ø¯ ÙˆÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ù†Ø´Ø§Ø· Ø§Ù„Ù†Ø¨Ø§Øª Ø¢Ø®Ø± Ø§Ù„Ø¯ÙˆØ±Ø©',
                        icon: 'ğŸŒŠ'
                    },
                    {
                        name: 'Ù…Ø¨ÙŠØ¯ ÙØ·Ø±ÙŠ Ø®ÙÙŠÙ ÙˆØ¢Ù…Ù† (Copper low dose Ø£Ùˆ Azoxystrobin)',
                        dosage: 'Ø­Ø³Ø¨ Ø§Ù„Ø¬Ø±Ø¹Ø© - Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© Ø­Ø³Ø¨ Ø§Ù„Ø·Ù‚Ø³',
                        purpose: 'Ø­Ù…Ø§ÙŠØ© Ù†Ù‡Ø§Ø¦ÙŠØ© Ù…Ù† Ø£Ø¹ÙØ§Ù† ÙˆÙ†Ù‚Ø· Ø§Ù„Ø£ÙˆØ±Ø§Ù‚ Ù‚Ø¨Ù„ Ø§Ù„Ø¬Ù†ÙŠ',
                        icon: 'ğŸ›¡ï¸'
                    },
                    {
                        name: 'Ù…Ø¨ÙŠØ¯ Ø­Ø´Ø±ÙŠ ÙØªØ±Ø© Ø£Ù…Ø§Ù† Ù‚ØµÙŠØ±Ø© (Spinosad)',
                        dosage: 'Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØªÙØ¬ - Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø¢ÙØ§Øª',
                        purpose: 'ÙŠØ­Ù…ÙŠ Ø§Ù„Ø«Ù…Ø§Ø± Ø¨Ø¯ÙˆÙ† Ù…Ø´Ø§ÙƒÙ„ Ù…ØªØ¨Ù‚ÙŠØ§Øª',
                        icon: 'ğŸ›'
                    }
                ]
            }
        ];

        window.uploadAllCrops = async function() {
            const btn = document.getElementById('uploadBtn');
            btn.disabled = true;
            btn.textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...';
            
            document.getElementById('status').innerHTML = '';
            addStatus('ğŸš€ Ø¨Ø¯Ø¡ ØªØ­Ù…ÙŠÙ„ Ø­Ù„ÙˆÙ„ Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„...', 'info');

            try {
                const crops = [
                    { code: 'pepper', name: 'ÙÙ„ÙÙ„', icon: 'ğŸŒ¶ï¸' },
                    { code: 'potato', name: 'Ø¨Ø·Ø§Ø·Ø§', icon: 'ğŸ¥”' },
                    { code: 'watermelon', name: 'Ø¨Ø·ÙŠØ®', icon: 'ğŸˆ' },
                    { code: 'melon', name: 'Ø¯Ù„Ø§Ø¹', icon: 'ğŸ‰' },
                    { code: 'strawberry', name: 'ÙØ±Ø§ÙˆÙ„Ø©', icon: 'ğŸ“' }
                ];

                let totalAdded = 0;

                for (const crop of crops) {
                    addStatus(`\nğŸ“¦ Ù…Ø¹Ø§Ù„Ø¬Ø© ${crop.icon} ${crop.name}...`, 'info');
                    
                    // Ø­Ø°Ù Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
                    const oldSnapshot = await getDocs(
                        query(collection(db, 'solutions'), where('crop', '==', crop.code))
                    );
                    
                    for (const doc of oldSnapshot.docs) {
                        await deleteDoc(doc.ref);
                    }
                    
                    if (oldSnapshot.size > 0) {
                        addStatus(`   ğŸ—‘ï¸ Ø­Ø°Ù ${oldSnapshot.size} Ø­Ù„ Ù‚Ø¯ÙŠÙ…`, 'info');
                    }

                    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ù„ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                    let cropCount = 0;
                    for (const baseSolution of baseSolutions) {
                        const solution = {
                            crop: crop.code,
                            cropArabic: crop.name,
                            period: baseSolution.period,
                            periodName: baseSolution.periodName,
                            problem: baseSolution.problem,
                            solution: '',
                            products: baseSolution.products,
                            timing: baseSolution.period === 'short' ? 'Ø¨Ø¹Ø¯ Ø§Ù„ØºØ±Ø§Ø³Ø©' : 
                                    baseSolution.period === 'medium' ? 'Ù†Ù‡Ø§ÙŠØ© Ù†Ù…Ùˆ Ø®Ø¶Ø±ÙŠ' :
                                    baseSolution.period === 'long' ? 'ØªÙƒÙˆÙŠÙ† Ø§Ù„Ø«Ù…Ø§Ø±' : 'Ù†Ø¶Ø¬ Ø§Ù„Ø«Ù…Ø§Ø±',
                            active: true,
                            createdAt: serverTimestamp(),
                            addedBy: 'admin'
                        };
                        
                        // Ø¥Ø¶Ø§ÙØ© notes ÙÙ‚Ø· Ù„ÙØªØ±Ø© harvest
                        if (baseSolution.period === 'harvest') {
                            solution.notes = 'ğŸ”š Ù‚Ø¨Ù„ Ø§Ù„Ø¬Ù†ÙŠ Ø¨Ù€ 7â€“10 Ø£ÙŠØ§Ù… Ù†ÙˆÙ‚Ù Ø£ÙŠ Ø±Ø´ ÙƒÙŠÙ…ÙŠØ§Ø¦ÙŠ';
                        }
                        
                        await addDoc(collection(db, 'solutions'), solution);
                        cropCount++;
                    }
                    
                    addStatus(`   âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${cropCount} Ø­Ù„ Ù„Ù„Ù€${crop.name}`, 'success');
                    totalAdded += cropCount;
                }

                // Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
                addStatus('\nğŸ“Š Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ...', 'info');
                
                for (const crop of crops) {
                    const verifySnapshot = await getDocs(
                        query(collection(db, 'solutions'), where('crop', '==', crop.code))
                    );
                    addStatus(`   ${crop.icon} ${crop.name}: ${verifySnapshot.size} Ø­Ù„`, 'success');
                }

                addStatus(`\nğŸ‰ ØªÙ…! Ø£Ø¶ÙÙ†Ø§ ${totalAdded} Ø­Ù„ Ù„Ù€ 5 Ù…Ø­Ø§ØµÙŠÙ„!`, 'success');
                addStatus('âœ… ÙƒÙ„ Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„ Ø¬Ø§Ù‡Ø²Ø© ÙÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¢Ù†!', 'success');
                
                btn.textContent = 'âœ… ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­';
                btn.style.background = '#28a745';

            } catch (error) {
                console.error('Error:', error);
                addStatus(`âŒ Ø®Ø·Ø£: ${error.message}`, 'error');
                btn.disabled = false;
                btn.textContent = 'ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©';
            }
        };
    </script>
</body>
</html>
